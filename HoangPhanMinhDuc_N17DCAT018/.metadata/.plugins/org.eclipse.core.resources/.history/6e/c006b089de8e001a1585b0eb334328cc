package app.ajax;

import java.io.IOException;
import java.io.PrintWriter;
import java.util.List;

import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;

import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.transaction.annotation.Transactional;

import app.entity.*;
import app.query.PlayListQuery;

@Transactional
@WebServlet("/AddToPlayList")
public class AddToPlayList extends HttpServlet{

	@Autowired
	SessionFactory ftr;
	private static final long serialVersionUID = 1L;
	
	protected void doPost(HttpServletRequest req, HttpServletResponse res) throws IOException{
		String songId = req.getParameter("songId");
		PlayListQuery query = new PlayListQuery(ftr);
		PlayListDetail item = new PlayListDetail();
		List<PlayList> pl = query.getPlayList((int)req.getSession().getAttribute("userId"), true);
		item.setPlId(plId);
		query.addSong(item);
		PrintWriter out = res.getWriter();
		out.print(songId);
	}
}
